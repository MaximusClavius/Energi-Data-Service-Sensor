type: custom:apexcharts-card
apex_config:
  chart:
    height: 400px
graph_span: 2d50m
span:
  start: day
now:
  show: true
  label: Nu
header:
  title: Spotpriser (kr/kWh)
  show: true
experimental:
  color_threshold: true
series:
  - entity: sensor.energinet_spotpris_dk1
    type: column
    opacity: 0.7
    data_generator: |
      const tarif = 1.20289;
      const afgift = 0.076;
      var data = entity.attributes.records.map((start, index) => {
        return [new Date(start["HourDK"]).getTime(), (entity.attributes.records[index]["SpotPriceDKK"] / 1000 + tarif + afgift) * 1.25];
      });
      return data;
    color_threshold:
      - value: 0
        color: green
      - value: 2
        color: yellow
      - value: 3
        color: orange
      - value: 4
        color: red
yaxis:
  - min: 0
